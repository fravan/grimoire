var c=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},M=class{static fromArray(t,r){let n=r||new be;for(let i=t.length-1;i>=0;--i)n=new G(t[i],n);return n}[Symbol.iterator](){return new Ge(this)}toArray(){return[...this]}atLeastLength(t){for(let r of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let r of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let r of this)t++;return t}};function b(e,t){return new G(e,t)}function f(e,t){return M.fromArray(e,t)}var Ge=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof be)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},be=class extends M{},G=class extends M{constructor(t,r){super(),this.head=t,this.tail=r}},ne=class e{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,r,n){return Ar(this.buffer,t,r,n)}intFromSlice(t,r,n,i){return Er(this.buffer,t,r,n,i)}binaryFromSlice(t,r){let n=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset+t,r-t);return new e(n)}sliceAfter(t){let r=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset+t,this.buffer.byteLength-t);return new e(r)}};function Er(e,t,r,n,i){let s=r-t;if(s<=6){let o=0;if(n)for(let u=t;u<r;u++)o=o*256+e[u];else for(let u=r-1;u>=t;u--)o=o*256+e[u];if(i){let u=2**(s*8-1);o>=u&&(o-=u*2)}return o}else{let o=0n;if(n)for(let u=t;u<r;u++)o=(o<<8n)+BigInt(e[u]);else for(let u=r-1;u>=t;u--)o=(o<<8n)+BigInt(e[u]);if(i){let u=1n<<BigInt(s*8-1);o>=u&&(o-=u*2n)}return Number(o)}}function Ar(e,t,r,n){let i=new DataView(e.buffer),s=r-t;if(s===8)return i.getFloat64(t,!n);if(s===4)return i.getFloat32(t,!n);{let o=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(o)}}var V=class e extends c{static isResult(t){return t instanceof e}},p=class extends V{constructor(t){super(),this[0]=t}isOk(){return!0}},a=class extends V{constructor(t){super(),this[0]=t}isOk(){return!1}};function h(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!Mt(n)||!Mt(i)||!Mr(n,i)||Sr(n,i)||Cr(n,i)||Nr(n,i)||qr(n,i)||Ir(n,i)||zr(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[u,l]=Tr(n);for(let d of u(n))r.push(l(n,d),l(i,d))}return!0}function Tr(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Sr(e,t){return e instanceof Date&&(e>t||e<t)}function Cr(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Nr(e,t){return Array.isArray(e)&&e.length!==t.length}function qr(e,t){return e instanceof Map&&e.size!==t.size}function Ir(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function zr(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Mt(e){return typeof e=="object"&&e!==null}function Mr(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function ie(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let u in s)o[u]=s[u];return o}var j=class extends c{};function J(e,t,r){return Bt(t,r,e)}function Br(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=b(i,n)}}}function Pr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Br(n,f([]));{let i=r.head;e=r.tail,t=b(i[0],n)}}}function Je(e){let t=Oe(e);return Pr(t,f([]))}function Y(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Hr(e,t,r,n){for(;;){let i=e,s=t,o=r,u=n;if(i.hasLength(0))return s;{let l=i.head;e=i.tail,t=o(s,l,u),r=o,n=u+1}}}function Xe(e,t,r){return Hr(e,t,r,0)}function le(e,t){if(e.isOk()){let r=e[0];return new p(t(r))}else{let r=e[0];return new a(r)}}function Qe(e,t){if(e.isOk()){let r=e[0];return new p(r)}else{let r=e[0];return new a(t(r))}}function Rt(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new a(r)}}function et(e,t){return Rt(e,t)}function Ut(e,t){return e.isOk()?e[0]:t}var Wt=new WeakMap,nt=new DataView(new ArrayBuffer(8)),it=0;function st(e){let t=Wt.get(e);if(t!==void 0)return t;let r=it++;return it===2147483647&&(it=0),Wt.set(e,r),r}function ot(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function lt(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Gt(e){nt.setFloat64(0,e);let t=nt.getInt32(0),r=nt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function tn(e){return lt(e.toString())}function rn(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return st(e);if(e instanceof Date)return Gt(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+E(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+E(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+ot(E(n),E(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+ot(E(o),lt(s))|0}}return r}function E(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Gt(e);case"string":return lt(e);case"bigint":return tn(e);case"object":return rn(e);case"symbol":return st(e);case"function":return st(e);default:return 0}}var I=5,ct=Math.pow(2,I),nn=ct-1,sn=ct/2,on=ct/4,O=0,q=1,L=2,W=3,ft={type:L,bitmap:0,array:[]};function fe(e,t){return e>>>t&nn}function Ee(e,t){return 1<<fe(e,t)}function un(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function at(e,t){return un(e&t-1)}function A(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function ln(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function ut(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Vt(e,t,r,n,i,s){let o=E(t);if(o===n)return{type:W,hash:o,array:[{type:O,k:t,v:r},{type:O,k:i,v:s}]};let u={val:!1};return ae(pt(ft,e,o,t,r,u),e,n,i,s,u)}function ae(e,t,r,n,i,s){switch(e.type){case q:return cn(e,t,r,n,i,s);case L:return pt(e,t,r,n,i,s);case W:return fn(e,t,r,n,i,s)}}function cn(e,t,r,n,i,s){let o=fe(r,t),u=e.array[o];if(u===void 0)return s.val=!0,{type:q,size:e.size+1,array:A(e.array,o,{type:O,k:n,v:i})};if(u.type===O)return h(n,u.k)?i===u.v?e:{type:q,size:e.size,array:A(e.array,o,{type:O,k:n,v:i})}:(s.val=!0,{type:q,size:e.size,array:A(e.array,o,Vt(t+I,u.k,u.v,r,n,i))});let l=ae(u,t+I,r,n,i,s);return l===u?e:{type:q,size:e.size,array:A(e.array,o,l)}}function pt(e,t,r,n,i,s){let o=Ee(r,t),u=at(e.bitmap,o);if(e.bitmap&o){let l=e.array[u];if(l.type!==O){let x=ae(l,t+I,r,n,i,s);return x===l?e:{type:L,bitmap:e.bitmap,array:A(e.array,u,x)}}let d=l.k;return h(n,d)?i===l.v?e:{type:L,bitmap:e.bitmap,array:A(e.array,u,{type:O,k:n,v:i})}:(s.val=!0,{type:L,bitmap:e.bitmap,array:A(e.array,u,Vt(t+I,d,l.v,r,n,i))})}else{let l=e.array.length;if(l>=sn){let d=new Array(32),x=fe(r,t);d[x]=pt(ft,t+I,r,n,i,s);let g=0,y=e.bitmap;for(let P=0;P<32;P++){if(y&1){let T=e.array[g++];d[P]=T}y=y>>>1}return{type:q,size:l+1,array:d}}else{let d=ln(e.array,u,{type:O,k:n,v:i});return s.val=!0,{type:L,bitmap:e.bitmap|o,array:d}}}}function fn(e,t,r,n,i,s){if(r===e.hash){let o=dt(e,n);if(o!==-1)return e.array[o].v===i?e:{type:W,hash:r,array:A(e.array,o,{type:O,k:n,v:i})};let u=e.array.length;return s.val=!0,{type:W,hash:r,array:A(e.array,u,{type:O,k:n,v:i})}}return ae({type:L,bitmap:Ee(e.hash,t),array:[e]},t,r,n,i,s)}function dt(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(h(t,e.array[n].k))return n;return-1}function je(e,t,r,n){switch(e.type){case q:return an(e,t,r,n);case L:return pn(e,t,r,n);case W:return dn(e,n)}}function an(e,t,r,n){let i=fe(r,t),s=e.array[i];if(s!==void 0){if(s.type!==O)return je(s,t+I,r,n);if(h(n,s.k))return s}}function pn(e,t,r,n){let i=Ee(r,t);if(!(e.bitmap&i))return;let s=at(e.bitmap,i),o=e.array[s];if(o.type!==O)return je(o,t+I,r,n);if(h(n,o.k))return o}function dn(e,t){let r=dt(e,t);if(!(r<0))return e.array[r]}function mt(e,t,r,n){switch(e.type){case q:return mn(e,t,r,n);case L:return _n(e,t,r,n);case W:return hn(e,n)}}function mn(e,t,r,n){let i=fe(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===O){if(!h(s.k,n))return e}else if(o=mt(s,t+I,r,n),o===s)return e;if(o===void 0){if(e.size<=on){let u=e.array,l=new Array(e.size-1),d=0,x=0,g=0;for(;d<i;){let y=u[d];y!==void 0&&(l[x]=y,g|=1<<d,++x),++d}for(++d;d<u.length;){let y=u[d];y!==void 0&&(l[x]=y,g|=1<<d,++x),++d}return{type:L,bitmap:g,array:l}}return{type:q,size:e.size-1,array:A(e.array,i,o)}}return{type:q,size:e.size,array:A(e.array,i,o)}}function _n(e,t,r,n){let i=Ee(r,t);if(!(e.bitmap&i))return e;let s=at(e.bitmap,i),o=e.array[s];if(o.type!==O){let u=mt(o,t+I,r,n);return u===o?e:u!==void 0?{type:L,bitmap:e.bitmap,array:A(e.array,s,u)}:e.bitmap===i?void 0:{type:L,bitmap:e.bitmap^i,array:ut(e.array,s)}}return h(n,o.k)?e.bitmap===i?void 0:{type:L,bitmap:e.bitmap^i,array:ut(e.array,s)}:e}function hn(e,t){let r=dt(e,t);if(r<0)return e;if(e.array.length!==1)return{type:W,hash:e.hash,array:ut(e.array,r)}}function Jt(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===O){t(s.v,s.k);continue}Jt(s,t)}}}var K=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=je(this.root,0,E(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?ft:this.root,s=ae(i,0,E(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=mt(this.root,0,E(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:je(this.root,0,E(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Jt(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+ot(E(r),E(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!h(t.get(n,!r),r))throw Kt}),!0}catch(r){if(r===Kt)return!1;throw r}}},Kt=Symbol();var xn=void 0;function B(e){return e.toString()}var Yt;function $n(e){if(globalThis.Intl&&Intl.Segmenter)return Yt||=new Intl.Segmenter,Yt.segment(e)[Symbol.iterator]()}function Zt(e){let t,r=$n(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new p([t,e.slice(t.length)]):new a(xn)}var Qt=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),ps=new RegExp(`^[${Qt}]*`),ds=new RegExp(`[${Qt}]*$`);function C(){return K.new()}function Oe(e){return M.fromArray(e.entries())}function Bt(e,t,r){return r.set(e,t)}function H(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof V)return"Result";if(e instanceof M)return"List";if(e instanceof ne)return"BitArray";if(e instanceof K)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function _t(e,t){for(;;){let r=e,n=t;if(n>0){let s=Zt(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function rr(e){return Number.isInteger(e)?new p(e):new a(0)}var Ae=class extends c{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},ht=class extends c{constructor(t){super(),this.function=t}};function nr(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new p(n):new a(i)}function jn(e,t,r){let n=r(e);return n.isOk()?[n[0],f([])]:[n[0],f([new Ae(t,H(e),f([]))])]}function En(e){return jn(e,"Int",rr)}var ir=new ht(En);function or(e){try{let t=JSON.parse(e);return new p(t)}catch(t){return new a(An(t,e))}}function An(e,t){return Tn(e)?new Se:Sn(e,t)}function Tn(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Sn(e,t){let r=[Cn,Nn,In,qn];for(let n of r){let i=n(e,t);if(i)return i}return new F("",0)}function Cn(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=Te(r[1]);return new F(n,-1)}function Nn(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=Te(r[1]),i=Number(r[2]);return new F(n,i)}function qn(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=zn(i,s,t),u=Te(t[o]);return new F(u,o)}function In(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=Te(r[2]);return new F(n,0)}function Te(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function zn(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var Se=class extends c{},F=class extends c{constructor(t){super(),this[0]=t}};var $t=class extends c{constructor(t){super(),this[0]=t}};function Bn(e,t){return et(or(e),r=>{let n=nr(r,t);return Qe(n,i=>new $t(i))})}function ur(e,t){return Bn(e,t)}function yt(e,t,r){return e?t:r()}var bt=class extends c{constructor(t){super(),this.all=t}};function pe(){return new bt(f([]))}var Q=class extends c{constructor(t){super(),this.content=t}},$=class extends c{constructor(t,r,n,i,s,o,u){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=u}},de=class extends c{constructor(t){super(),this.subtree=t}},ee=class extends c{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},me=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function Wn(e){if(e instanceof ee)return new a(void 0);{let t=e[0],r=e[1],n=_t(t,2);return new p([n,r])}}function Kn(e,t,r){return Xe(e,t,(n,i,s)=>{let o=r+"-"+B(s);return cr(i,n,o)})}function cr(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof Q)return i;if(n instanceof de){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,u=n.children,l=Y(o,i,(d,x)=>{let g=Wn(x);if(g.isOk()){let y=g[0][0],P=g[0][1];return J(d,s+"-"+y,P)}else return d});return Kn(u,l,s)}}}function fr(e){return cr(e,C(),"0")}function Gn(e,t){return new ee(e,t,!1)}function pr(e,t){return new me("on"+e,t)}function kt(e){return Gn("class",e)}function _e(e,t,r){return e==="area"?new $("","",e,t,f([]),!1,!0):e==="base"?new $("","",e,t,f([]),!1,!0):e==="br"?new $("","",e,t,f([]),!1,!0):e==="col"?new $("","",e,t,f([]),!1,!0):e==="embed"?new $("","",e,t,f([]),!1,!0):e==="hr"?new $("","",e,t,f([]),!1,!0):e==="img"?new $("","",e,t,f([]),!1,!0):e==="input"?new $("","",e,t,f([]),!1,!0):e==="link"?new $("","",e,t,f([]),!1,!0):e==="meta"?new $("","",e,t,f([]),!1,!0):e==="param"?new $("","",e,t,f([]),!1,!0):e==="source"?new $("","",e,t,f([]),!1,!0):e==="track"?new $("","",e,t,f([]),!1,!0):e==="wbr"?new $("","",e,t,f([]),!1,!0):new $("","",e,t,r,!1,!1)}function mr(e){return new Q(e)}var Ot=class extends c{constructor(t){super(),this.dict=t}};function _r(){return new Ot(C())}var Ne=class extends c{constructor(t){super(),this[0]=t}},qe=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Ie=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};function hr(e){return h(e.created,C())&&h(e.removed,_r())&&h(e.updated,C())}var ze=class extends c{constructor(t){super(),this[0]=t}},Me=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},he=class extends c{constructor(t){super(),this[0]=t}},z=class extends c{constructor(t){super(),this[0]=t}},xe=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},Be=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}};var $e=class extends c{},Pe=class extends c{constructor(t,r){super(),this[0]=t,this[1]=r}},De=class extends c{constructor(t){super(),this[0]=t}},Fe=class extends c{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function vt(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:u}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let l=document.createTextNode(o.content);u.replaceChild(l,s),n??=l}else{let l=document.createTextNode(o.content);u.appendChild(l),n??=l}else if(o.tag!==void 0){let l=Qn({prev:s,next:o,dispatch:r,stack:i});s?s!==l&&u.replaceChild(l,s):u.appendChild(l),n??=l}}return n}function Qn({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),u;if(we.has(o))u=we.get(o);else{let m=new Map;we.set(o,m),u=m}let l=s?new Set(u.keys()):null,d=s?new Set(Array.from(e.attributes,m=>m.name)):null,x=null,g=null,y=null;if(s&&t.tag==="textarea"){let m=t.children[Symbol.iterator]().next().value?.content;m!==void 0&&(o.value=m)}let P=[];for(let m of t.attrs){let _=m[0],w=m[1];if(m.as_property)o[_]!==w&&(o[_]=w),s&&d.delete(_);else if(_.startsWith("on")){let S=_.slice(2),Ke=r(w,S==="input");u.has(S)||o.addEventListener(S,ge),u.set(S,Ke),s&&l.delete(S)}else if(_.startsWith("data-lustre-on-")){let S=_.slice(15),Ke=r(ei);u.has(S)||o.addEventListener(S,ge),u.set(S,Ke),o.setAttribute(_,w),s&&(l.delete(S),d.delete(_))}else _.startsWith("delegate:data-")||_.startsWith("delegate:aria-")?(o.setAttribute(_,w),P.push([_.slice(10),w])):_==="class"?x=x===null?w:x+" "+w:_==="style"?g=g===null?w:g+w:_==="dangerous-unescaped-html"?y=w:(o.getAttribute(_)!==w&&o.setAttribute(_,w),(_==="value"||_==="selected")&&(o[_]=w),s&&d.delete(_))}if(x!==null&&(o.setAttribute("class",x),s&&d.delete("class")),g!==null&&(o.setAttribute("style",g),s&&d.delete("style")),s){for(let m of d)o.removeAttribute(m);for(let m of l)u.delete(m),o.removeEventListener(m,ge)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let m of o.assignedElements())for(let[_,w]of P)m.hasAttribute(_)||m.setAttribute(_,w)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(y!==null)return o.innerHTML=y,o;let T=o.firstChild,qt=null,It=null,zt=null,We=Re(t).next().value;if(s&&We!==void 0&&We.key!==void 0&&We.key!==""){qt=new Set,It=xr(e),zt=xr(t);for(let m of Re(t))T=ti(T,m,o,n,zt,It,qt)}else for(let m of Re(t))n.unshift({prev:T,next:m,parent:o}),T=T?.nextSibling;for(;T;){let m=T.nextSibling;o.removeChild(T),T=m}return o}var we=new WeakMap;function ge(e){let t=e.currentTarget;if(!we.has(t)){t.removeEventListener(e.type,ge);return}let r=we.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,ge);return}r.get(e.type)(e)}function ei(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let u=o.split(".");for(let l=0,d=s,x=e;l<u.length;l++)l===u.length-1?d[u[l]]=x[u[l]]:(d[u[l]]??={},x=x[u[l]],d=d[u[l]]);return s},{data:n})}}function xr(e){let t=new Map;if(e)for(let r of Re(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function ti(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let l=e.nextSibling;r.removeChild(e),e=l}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let u=s.get(t.key);if(!u&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!u&&e!==null){let l=document.createTextNode("");return r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e}return!u||u===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e)}function*Re(e){for(let t of e.children)yield*$r(t)}function*$r(e){e.subtree!==void 0?yield*$r(e.subtree()):yield e}var Lt=class e{static start({init:t,update:r,view:n},i,s){if(!Et())return new a(new ye);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new a(new Ue(i));let u=new e(o,t(s),r,n);return new p(l=>u.send(l))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.requestAnimationFrame(()=>this.#n(n.all.toArray(),!0))}root;send(t){if(t instanceof he){if(t[0]instanceof Fe){this.#t=window.cancelAnimationFrame(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let l=s(u);l instanceof p&&this.send(new z(l[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));vt(i,r,n)}}else if(t instanceof z){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.cancelAnimationFrame(this.#t),this.#n()):this.#t||(this.#t=window.requestAnimationFrame(()=>this.#n()))}else if(t instanceof xe){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof $e)for(this.#t=window.cancelAnimationFrame(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>u=>{let l=s(u);l instanceof p&&this.send(new z(l[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));vt(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=u=>this.send(new z(u)),i=(u,l)=>this.root.dispatchEvent(new CustomEvent(u,{detail:l,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},wr=Lt.start;var jt=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new p(u=>o.send(u))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#l=s,this.#n=new Map,this.#o=fr(this.#t),this.#u(r.all.toArray())}send(t){if(t instanceof ze){for(let r of t[0]){let n=this.#l.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof a||this.#r.push(i)}this.#u()}else if(t instanceof Me)this.#r=this.#r.concat(t[0].toArray()),this.#u(t[1].all.toArray());else if(!(t instanceof he))if(t instanceof z)this.#r.push(t[0]),this.#u();else if(t instanceof xe){let r=new qe(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof Be){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof a)return;this.#r.push(n[0]),this.#u()}else if(t instanceof Pe){let r=Je(this.#l),n=new Ie(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof De&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#l;#u(t=[]){this.#c(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!hr(n)){let i=new Ne(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#c(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:u=>this.send(new z(u)),emit:(u,l)=>this.root.dispatchEvent(new CustomEvent(u,{detail:l,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#c(t)}},ri=jt.start,Et=()=>globalThis.window&&window.document;var At=class extends c{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var Ue=class extends c{constructor(t){super(),this.selector=t}},ye=class extends c{};function gr(e,t,r){return new At(e,t,r,new j)}function yr(e,t,r){return yt(!Et(),new a(new ye),()=>wr(e,t,r))}function Tt(e){return mr(e)}function br(e,t){return _e("div",e,t)}function kr(e,t){return _e("p",e,t)}function Or(e,t){return _e("button",e,t)}function si(e,t){return pr(e,t)}function vr(e){return si("click",t=>new p(e))}function St(e){let t=document.querySelector(e);return t?new p(t):new a}function Ct(e){return e.innerText}var He=class extends c{},Nt=class extends c{};function fi(e){return[e,pe()]}function ai(e,t){return t instanceof He?[e+1,pe()]:[e-1,pe()]}function Lr(e,t){return Or(f([vr(t),kt("bg-red-600 text-white text-semibold rounded-lg hover:bg-red-800 px-2 py-1 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2")]),f([Tt(e)]))}function pi(e){return br(f([kt("flex flex-col gap-12")]),f([Lr("Decrement",new Nt),kr(f([]),f([Tt(B(e))])),Lr("Increment",new He)]))}function jr(){let e=(()=>{let s=St("#model");return le(s,Ct)})();if(!e.isOk())throw ie("let_assert","client",16,"main","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0],r=(()=>{let s=ur(t,ir);return Ut(s,0)})(),n=gr(fi,ai,pi),i=yr(n,"#app",r);if(!i.isOk())throw ie("let_assert","client",25,"main","Pattern match failed, no pattern matched the value.",{value:i})}jr();
